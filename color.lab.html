<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Color Lab</title>
   <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
   <style>
       /* Dynamic Gradient Background */
       body {
           font-family: 'Roboto', sans-serif;
           display: flex;
           flex-direction: column;
           align-items: center;
           justify-content: center;
           min-height: 100vh;
           margin: 0;
           background: linear-gradient(135deg, var(--bg-color1), var(--bg-color2));
           color: #ecf0f1;
           overflow-x: hidden;
           transition: background 0.5s ease;
       }

       /* Main Container with Enhanced Transparency */
       .container {
           background-color: rgba(44, 62, 80, 0.85);
           padding: 30px;
           border-radius: 15px;
           box-shadow: 0 12px 40px rgba(0, 0, 0, 0.6);
           text-align: center;
           width: 90%;
           max-width: 650px;
           box-sizing: border-box;
           backdrop-filter: blur(10px);
           -webkit-backdrop-filter: blur(10px);
           border: 1px solid rgba(255, 255, 255, 0.15);
           position: relative;
           min-height: 550px;
           display: flex;
           flex-direction: column;
           overflow: hidden;
       }

       /* Title with Neon Glow */
       h1 {
           color: #ecf0f1;
           margin-bottom: 30px;
           font-size: 2.5em;
           font-weight: 700;
           text-shadow: 0 0 10px rgba(52, 152, 219, 0.8), 0 0 20px rgba(52, 152, 219, 0.4);
       }

       /* Tab Navigation with Hover Effects */
       .tabs {
           display: flex;
           justify-content: center;
           margin-bottom: 30px;
           border-bottom: 1px solid rgba(255, 255, 255, 0.25);
       }

       .tab-button {
           background-color: transparent;
           border: none;
           padding: 12px 25px;
           font-size: 1.1em;
           color: #bdc3c7;
           cursor: pointer;
           transition: all 0.3s ease;
           border-radius: 8px 8px 0 0;
           font-weight: 500;
           position: relative;
       }

       .tab-button:hover {
           color: #ecf0f1;
           background-color: rgba(255, 255, 255, 0.1);
           transform: translateY(-2px);
       }

       .tab-button.active {
           color: #1abc9c;
           background-color: rgba(255, 255, 255, 0.15);
           border-bottom: 3px solid #1abc9c;
           font-weight: 700;
       }

       /* Tab Content Wrapper */
       .tab-content-wrapper {
           flex-grow: 1;
           position: relative;
           width: 100%;
           min-height: 400px;
       }

       .tab-content {
           position: absolute;
           top: 0;
           left: 0;
           width: 100%;
           display: flex;
           flex-direction: column;
           align-items: center;
           padding-top: 15px;
           opacity: 0;
           transform: translateX(100%);
           transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out;
           visibility: hidden;
       }

       .tab-content.active {
           opacity: 1;
           transform: translateX(0);
           visibility: visible;
           position: static;
       }

       /* Color Picker Tab Elements */
       #color-display-box {
           width: 160px;
           height: 160px;
           border: 3px solid rgba(255, 255, 255, 0.4);
           margin: 25px auto;
           background-color: #000000;
           border-radius: 12px;
           transition: background-color 0.3s ease, box-shadow 0.3s ease;
           position: relative;
           cursor: pointer;
           box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
       }

       #color-display-box:hover {
           box-shadow: 0 0 20px rgba(26, 188, 156, 0.7);
       }

       #color-picker-input {
           position: absolute;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           opacity: 0;
           cursor: pointer;
       }

       .slider-group {
           display: flex;
           align-items: center;
           justify-content: center;
           width: 90%;
           max-width: 500px;
           margin-bottom: 20px;
       }

       .slider-group label {
           width: 60px;
           text-align: right;
           margin-right: 20px;
           font-weight: 400;
           color: #bdc3c7;
           text-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
       }

       .slider-group input[type="range"] {
           flex-grow: 1;
           height: 12px;
           border-radius: 6px;
           background: #444;
           outline: none;
           -webkit-appearance: none;
           appearance: none;
           cursor: grab;
           transition: background 0.3s ease;
       }

       .slider-group input[type="range"]:hover {
           background: #555;
       }

       .slider-group input[type="range"]:active {
           cursor: grabbing;
       }

       .slider-group input[type="range"]::-webkit-slider-thumb {
           -webkit-appearance: none;
           appearance: none;
           width: 24px;
           height: 24px;
           border-radius: 50%;
           background: #1abc9c;
           border: 3px solid #ecf0f1;
           cursor: grab;
           transition: background 0.2s ease, transform 0.2s ease;
       }

       .slider-group input[type="range"]::-webkit-slider-thumb:hover {
           transform: scale(1.1);
       }

       .slider-group input[type="range"]::-moz-range-thumb {
           width: 24px;
           height: 24px;
           border-radius: 50%;
           background: #1abc9c;
           border: 3px solid #ecf0f1;
           cursor: grab;
           transition: background 0.2s ease, transform 0.2s ease;
       }

       .slider-group input[type="range"]::-moz-range-thumb:hover {
           transform: scale(1.1);
       }

       #red-slider::-webkit-slider-thumb { background: #e74c3c; }
       #green-slider::-webkit-slider-thumb { background: #2ecc71; }
       #blue-slider::-webkit-slider-thumb { background: #3498db; }

       .slider-group span {
           width: 40px;
           text-align: left;
           margin-left: 15px;
           font-weight: 500;
           color: #ecf0f1;
           text-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
       }

       .code-output {
           background-color: rgba(0, 0, 0, 0.35);
           padding: 12px 20px;
           border-radius: 6px;
           margin-top: 15px;
           font-family: 'Courier New', monospace;
           font-size: 0.95em;
           color: #a8dadc;
           border: 1px dashed rgba(255, 255, 255, 0.15);
           cursor: copy;
           position: relative;
           user-select: text;
           word-break: break-all;
           transition: background-color 0.3s ease, transform 0.2s ease;
       }

       .code-output:hover {
           background-color: rgba(0, 0, 0, 0.45);
           transform: translateY(-2px);
       }

       .copy-feedback {
           position: absolute;
           top: -30px;
           left: 50%;
           transform: translateX(-50%);
           background-color: #2ecc71;
           color: white;
           padding: 6px 12px;
           border-radius: 5px;
           font-size: 0.8em;
           opacity: 0;
           transition: opacity 0.3s ease-out, top 0.3s ease-out;
           pointer-events: none;
           white-space: nowrap;
       }

       .copy-feedback.show {
           opacity: 1;
           top: -40px;
       }

       /* Color Mixing Lab Elements */
       .mixing-input-row {
           display: flex;
           align-items: center;
           justify-content: center;
           margin-bottom: 20px;
           flex-wrap: wrap;
           width: 100%;
           max-width: 450px;
       }

       .mixing-input-row label {
           font-weight: 400;
           margin-right: 15px;
           color: #bdc3c7;
           width: 70px;
           text-align: right;
           text-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
       }

       .mixing-input-row select {
           flex-grow: 1;
           padding: 10px;
           border-radius: 6px;
           border: 1px solid rgba(255, 255, 255, 0.25);
           background-color: rgba(0, 0, 0, 0.25);
           color: #ecf0f1;
           font-size: 0.95em;
           outline: none;
           max-width: 160px;
           appearance: none;
           -webkit-appearance: none;
           background-image: url('data:image/svg+xml;utf8,<svg fill="%23ecf0f1" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
           background-repeat: no-repeat;
           background-position: right 10px center;
           transition: background-color 0.3s ease;
       }

       .mixing-input-row select:hover {
           background-color: rgba(0, 0, 0, 0.35);
       }

       .mixing-preview-box {
           width: 70px;
           height: 35px;
           border: 1px solid rgba(255, 255, 255, 0.25);
           border-radius: 5px;
           background-color: black;
           transition: background-color 0.3s ease, box-shadow 0.3s ease;
           margin-left: 15px;
           position: relative;
           cursor: pointer;
       }

       .mixing-preview-box:hover {
           box-shadow: 0 0 10px rgba(26, 188, 156, 0.5);
       }

       .mixing-preview-box input[type="color"] {
           position: absolute;
           top: 0;
           left: 0;
           width: 100%;
           height: 100%;
           opacity: 0;
           cursor: pointer;
       }

       #mixed-result-box {
           width: 130px;
           height: 70px;
           border: 3px solid rgba(255, 255, 255, 0.4);
           border-radius: 10px;
           background-color: black;
           margin: 25px auto;
           transition: background-color 0.3s ease, box-shadow 0.3s ease;
           box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
       }

       #mixed-result-box:hover {
           box-shadow: 0 0 25px rgba(26, 188, 156, 0.7);
       }

       .mixing-info {
           background-color: rgba(52, 73, 94, 0.7);
           padding: 20px;
           border-radius: 10px;
           margin-top: 25px;
           color: #bdc3c7;
           font-size: 0.95em;
           text-align: left;
           line-height: 1.5;
           border: 1px dashed rgba(189, 195, 199, 0.2);
           box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
       }

       .mixing-info strong {
           color: #ecf0f1;
           text-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
       }

       .mixing-info ul {
           list-style-type: disc;
           margin-left: 25px;
           padding-left: 0;
           margin-top: 15px;
       }

       .mixing-info li {
           margin-bottom: 8px;
       }

       /* Footer */
       .footer {
           margin-top: 50px;
           padding: 20px;
           background-color: rgba(0, 0, 0, 0.25);
           border-radius: 10px;
           font-size: 0.9em;
           color: #bdc3c7;
           width: 80%;
           max-width: 450px;
           text-align: center;
           box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
           transition: background-color 0.3s ease;
       }

       .footer:hover {
           background-color: rgba(0, 0, 0, 0.35);
       }

       .footer a {
           color: #1abc9c;
           text-decoration: none;
           font-weight: bold;
           transition: color 0.3s ease;
       }

       .footer a:hover {
           color: #16a085;
           text-decoration: underline;
       }

       /* Responsive Adjustments */
       @media (max-width: 480px) {
           .container {
               padding: 25px;
           }
           h1 {
               font-size: 2em;
           }
           .tab-button {
               padding: 10px 20px;
               font-size: 1em;
           }
           #color-display-box {
               width: 130px;
               height: 130px;
           }
           .slider-group {
               flex-direction: column;
               align-items: flex-start;
               width: 100%;
           }
           .slider-group label {
               width: auto;
               margin-bottom: 8px;
               text-align: left;
           }
           .slider-group input[type="range"] {
               width: 100%;
               margin-left: 0;
           }
           .slider-group span {
               width

: 100%;
               text-align: right;
               margin-left: 0;
           }
           .code-output {
               font-size: 0.85em;
               padding: 10px 15px;
           }
           .mixing-input-row {
               flex-direction: column;
               align-items: flex-start;
           }
           .mixing-input-row label {
               width: auto;
               margin-bottom: 8px;
           }
           .mixing-input-row select {
               width: 100%;
               max-width: none;
           }
           .mixing-preview-box {
               margin-left: 0;
               margin-top: 12px;
           }
           #mixed-result-box {
               width: 110px;
               height: 60px;
           }
           .mixing-info {
               font-size: 0.85em;
               padding: 15px;
           }
       }
   </style>
</head>
<body>
   <div class="container">
       <h1>Color Lab</h1>

       <div class="tabs">
           <button class="tab-button active" data-tab="rgb">RGB Mixer</button>
           <button class="tab-button" data-tab="mixing">Color Simulation</button>
       </div>

       <div class="tab-content-wrapper">
           <div id="rgb" class="tab-content active">
               <div id="color-display-box">
                   <input type="color" id="color-picker-input" value="#000000">
               </div>

               <div class="slider-group">
                   <label for="red-slider">Red:</label>
                   <input type="range" id="red-slider" min="0" max="255" value="0">
                   <span id="red-value">0</span>
               </div>

               <div class="slider-group">
                   <label for="green-slider">Green:</label>
                   <input type="range" id="green-slider" min="0" max="255" value="0">
                   <span id="green-value">0</span>
               </div>

               <div class="slider-group">
                   <label for="blue-slider">Blue:</label>
                   <input type="range" id="blue-slider" min="0" max="255" value="0">
                   <span id="blue-value">0</span>
               </div>

               <div id="hex-output" class="code-output">
                   HEX: #000000
                   <span class="copy-feedback" id="hex-copy-feedback">Copied!</span>
               </div>
               <div id="rgb-output" class="code-output">
                   RGB: rgb(0, 0, 0)
                   <span class="copy-feedback" id="rgb-copy-feedback">Copied!</span>
               </div>
               <div id="python-output" class="code-output">
                   Python RGB: [0, 0, 0]
                   <span class="copy-feedback" id="python-copy-feedback">Copied!</span>
               </div>
               <div id="binary-output" class="code-output">
                   Binary: [00000000, 00000000, 00000000]
                   <span class="copy-feedback" id="binary-copy-feedback">Copied!</span>
               </div>
           </div>

           <div id="mixing" class="tab-content">
               <h2>Color Simulation</h2>
               <p style="color: #bdc3c7; font-size: 0.95em; margin-bottom: 25px;">
                   Explore how object colors appear under various light sources.
               </p>

               <div class="mixing-input-row">
                   <label for="object-color-select">Object:</label>
                   <select id="object-color-select">
                       <option value="custom">Custom (Pick Color)</option>
                       <option value="red">Red</option>
                       <option value="green">Green</option>
                       <option value="blue">Blue</option>
                       <option value="yellow">Yellow</option>
                       <option value="magenta">Magenta</option>
                       <option value="cyan">Cyan</option>
                       <option value="white" selected>White</option>
                       <option value="black">Black</option>
                       <option value="gray">Gray</option>
                       <option value="purple">Purple</option>
                       <option value="orange">Orange</option>
                       <option value="pink">Pink</option>
                       <option value="brown">Brown</option>
                       <option value="beige">Beige</option>
                       <option value="turquoise">Turquoise</option>
                       <option value="lime">Lime</option>
                       <option value="indigo">Indigo</option>
                       <option value="violet">Violet</option>
                       <option value="maroon">Maroon</option>
                       <option value="navy">Navy</option>
                       <option value="olive">Olive</option>
                       <option value="teal">Teal</option>
                       <option value="coral">Coral</option>
                       <option value="salmon">Salmon</option>
                       <option value="gold">Gold</option>
                       <option value="silver">Silver</option>
                   </select>
                   <div id="object-preview-box" class="mixing-preview-box">
                       <input type="color" id="object-color-picker" value="#ffffff">
                   </div>
               </div>

               <div class="mixing-input-row">
                   <label for="light-color-select">Light:</label>
                   <select id="light-color-select">
                       <option value="custom">Custom (Pick Color)</option>
                       <option value="red">Red</option>
                       <option value="green">Green</option>
                       <option value="blue">Blue</option>
                       <option value="yellow">Yellow</option>
                       <option value="magenta">Magenta</option>
                       <option value="cyan">Cyan</option>
                       <option value="white" selected>White</option>
                       <option value="black">Black</option>
                       <option value="gray">Gray</option>
                       <option value="purple">Purple</option>
                       <option value="orange">Orange</option>
                       <option value="pink">Pink</option>
                       <option value="brown">Brown</option>
                       <option value="beige">Beige</option>
                       <option value="turquoise">Turquoise</option>
                       <option value="lime">Lime</option>
                       <option value="indigo">Indigo</option>
                       <option value="violet">Violet</option>
                       <option value="maroon">Maroon</option>
                       <option value="navy">Navy</option>
                       <option value="olive">Olive</option>
                       <option value="teal">Teal</option>
                       <option value="coral">Coral</option>
                       <option value="salmon">Salmon</option>
                       <option value="gold">Gold</option>
                       <option value="silver">Silver</option>
                   </select>
                   <div id="light-preview-box" class="mixing-preview-box">
                       <input type="color" id="light-color-picker" value="#ffffff">
                   </div>
               </div>

               <div id="mixed-result-box"></div>

               <div id="mixer-rgb-output" class="code-output">
                   RGB: rgb(255, 255, 255)
                   <span class="copy-feedback" id="mixer-rgb-copy-feedback">Copied!</span>
               </div>
               <div id="mixer-python-output" class="code-output">
                   Python RGB: [255, 255, 255]
                   <span class="copy-feedback" id="mixer-python-copy-feedback">Copied!</span>
               </div>
               <div id="mixer-binary-output" class="code-output">
                   Binary: [11111111, 11111111, 11111111]
                   <span class="copy-feedback" id="mixer-binary-copy-feedback">Copied!</span>
               </div>
           </div>
       </div>
   </div>

   <div class="footer">
       <p>Developed by <a href="https://www.instagram.com/rishabhsahill" target="_blank" rel="noopener noreferrer">Rishabh Kumar</a></p>
   </div>

   <script>
       // --- Dynamic Background Gradient ---
       function setRandomGradient() {
           const colors = [
               ['#2c3e50', '#34495e'], ['#1a3c34', '#2a6041'], ['#3c2f5f', '#5e3a8c'],
               ['#4b134f', '#6f1a7e'], ['#1e3a5f', '#355c7d'], ['#4a2c3e', '#6b3e5b']
           ];
           const randomIndex = Math.floor(Math.random() * colors.length);
           document.documentElement.style.setProperty('--bg-color1', colors[randomIndex][0]);
           document.documentElement.style.setProperty('--bg-color2', colors[randomIndex][1]);
       }

       // --- Utility Functions ---
       function hexToRgb(hex) {
           const r = parseInt(hex.slice(1, 3), 16);
           const g = parseInt(hex.slice(3, 5), 16);
           const b = parseInt(hex.slice(5, 7), 16);
           return { r, g, b };
       }

       function rgbToHex(r, g, b) {
           const toHexComponent = (c) => {
               const hex = Math.round(c).toString(16);
               return hex.length === 1 ? "0" + hex : hex;
           };
           return `#${toHexComponent(r)}${toHexComponent(g)}${toHexComponent(b)}`;
       }

       function decimalToBinary(decimal) {
           return ('00000000' + (decimal >>> 0).toString(2)).slice(-8);
       }

       function showCopyFeedback(messageElement) {
           messageElement.classList.add('show');
           setTimeout(() => {
               messageElement.classList.remove('show');
           }, 1000);
       }

       // --- Global Element References ---
       const tabButtons = document.querySelectorAll('.tab-button');
       const tabContents = document.querySelectorAll('.tab-content');

       // RGB Mixer Tab Elements
       const colorDisplayBox = document.getElementById('color-display-box');
       const colorPickerInput = document.getElementById('color-picker-input');
       const redSlider = document.getElementById('red-slider');
       const greenSlider = document.getElementById('green-slider');
       const blueSlider = document.getElementById('blue-slider');
       const redValueSpan = document.getElementById('red-value');
       const greenValueSpan = document.getElementById('green-value');
       const blueValueSpan = document.getElementById('blue-value');
       const hexOutput = document.getElementById('hex-output');
       const rgbOutput = document.getElementById('rgb-output');
       const pythonOutput = document.getElementById('python-output');
       const binaryOutput = document.getElementById('binary-output');
       const hexCopyFeedback = document.getElementById('hex-copy-feedback');
       const rgbCopyFeedback = document.getElementById('rgb-copy-feedback');
       const pythonCopyFeedback = document.getElementById('python-copy-feedback');
       const binaryCopyFeedback = document.getElementById('binary-copy-feedback');

       // Color Simulation Tab Elements
       const objectColorSelect = document.getElementById('object-color-select');
       const lightColorSelect = document.getElementById('light-color-select');
       const objectPreviewBox = document.getElementById('object-preview-box');
       const lightPreviewBox = document.getElementById('light-preview-box');
       const objectColorPicker = document.getElementById('object-color-picker');
       const lightColorPicker = document.getElementById('light-color-picker');
       const mixedResultBox = document.getElementById('mixed-result-box');
       const mixerRgbOutput = document.getElementById('mixer-rgb-output');
       const mixerPythonOutput = document.getElementById('mixer-python-output');
       const mixerBinaryOutput = document.getElementById('mixer-binary-output');
       const mixerRgbCopyFeedback = document.getElementById('mixer-rgb-copy-feedback');
       const mixerPythonCopyFeedback = document.getElementById('mixer-python-copy-feedback');
       const mixerBinaryCopyFeedback = document.getElementById('mixer-binary-copy-feedback');

       // Predefined Colors for Simulation (Expanded)
       const colorDefinitions = {
           'red': [255, 0, 0],
           'green': [0, 255, 0],
           'blue': [0, 0, 255],
           'yellow': [255, 255, 0],
           'magenta': [255, 0, 255],
           'cyan': [0, 255, 255],
           'white': [255, 255, 255],
           'black': [0, 0, 0],
           'gray': [128, 128, 128],
           'purple': [128, 0, 128],
           'orange': [255, 165, 0],
           'pink': [255, 192, 203],
           'brown': [165, 42, 42],
           'beige': [245, 245, 220],
           'turquoise': [64, 224, 208],
           'lime': [0, 255, 0],
           'indigo': [75, 0, 130],
           'violet': [238, 130, 238],
           'maroon': [128, 0, 0],
           'navy': [0, 0, 128],
           'olive': [128, 128, 0],
           'teal': [0, 128, 128],
           'coral': [255, 127, 127],
           'salmon': [250, 128, 114],
           'gold': [255, 215, 0],
           'silver': [192, 192, 192],
           'custom': [255, 255, 255] // Default for custom, updated by picker
       };

       // --- Functionality Logic ---

       // Updates RGB Mixer tab
       function updateRgbMixer(source = 'sliders') {
           let r, g, b;

           if (source === 'sliders') {
               r = parseInt(redSlider.value);
               g = parseInt(greenSlider.value);
               b = parseInt(blueSlider.value);
               colorPickerInput.value = rgbToHex(r, g, b);
           } else if (source === 'picker') {
               const hex = colorPickerInput.value;
               const rgb = hexToRgb(hex);
               r = rgb.r;
               g = rgb.g;
               b = rgb.b;
               redSlider.value = r;
               greenSlider.value = g;
               blueSlider.value = b;
           }

           colorDisplayBox.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
           redValueSpan.textContent = r;
           greenValueSpan.textContent = g;
           blueValueSpan.textContent = b;

           hexOutput.textContent = `HEX: ${rgbToHex(r, g, b).toUpperCase()}`;
           rgbOutput.textContent = `RGB: rgb(${r}, ${g}, ${b})`;
           pythonOutput.textContent = `Python RGB: [${r}, ${g}, ${b}]`;
           binaryOutput.textContent = `Binary: [${decimalToBinary(r)}, ${decimalToBinary(g)}, ${decimalToBinary(b)}]`;

           if (!hexOutput.querySelector('.copy-feedback')) hexOutput.appendChild(hexCopyFeedback);
           if (!rgbOutput.querySelector('.copy-feedback')) rgbOutput.appendChild(rgbCopyFeedback);
           if (!pythonOutput.querySelector('.copy-feedback')) pythonOutput.appendChild(pythonCopyFeedback);
           if (!binaryOutput.querySelector('.copy-feedback')) binaryOutput.appendChild(binaryCopyFeedback);
       }

       // Updates Color Simulation tab
       function updateColorSimulation() {
           let objectRgb, lightRgb;

           // Handle object color
           if (objectColorSelect.value === 'custom') {
               const hex = objectColorPicker.value;
               objectRgb = hexToRgb(hex);
               objectPreviewBox.style.backgroundColor = `rgb(${objectRgb.r}, ${objectRgb.g}, ${objectRgb.b})`;
           } else {
               objectRgb = colorDefinitions[objectColorSelect.value];
               objectPreviewBox.style.backgroundColor = `rgb(${objectRgb[0]}, ${objectRgb[1]}, ${objectRgb[2]})`;
               objectColorPicker.value = rgbToHex(objectRgb[0], objectRgb[1], objectRgb[2]);
           }

           // Handle light color
           if (lightColorSelect.value === 'custom') {
               const hex = lightColorPicker.value;
               lightRgb = hexToRgb(hex);
               lightPreviewBox.style.backgroundColor = `rgb(${lightRgb.r}, ${lightRgb.g}, ${lightRgb.b})`;
           } else {
               lightRgb = colorDefinitions[lightColorSelect.value];
               lightPreviewBox.style.backgroundColor = `rgb(${lightRgb[0]}, ${lightRgb[1]}, ${lightRgb[2]})`;
               lightColorPicker.value = rgbToHex(lightRgb[0], lightRgb[1], lightRgb[2]);
           }

           // Subtractive mixing logic
           const mixedR = (objectRgb.r > 0 && lightRgb.r > 0) ? Math.min(objectRgb.r, lightRgb.r) : 0;
           const mixedG = (objectRgb.g > 0 && lightRgb.g > 0) ? Math.min(objectRgb.g, lightRgb.g) : 0;
           const mixedB = (objectRgb.b > 0 && lightRgb.b > 0) ? Math.min(objectRgb.b, lightRgb.b) : 0;

           mixedResultBox.style.backgroundColor = `rgb(${mixedR}, ${mixedG}, ${mixedB})`;

           mixerRgbOutput.textContent = `RGB: rgb(${mixedR}, ${mixedG}, ${mixedB})`;
           mixerPythonOutput.textContent = `Python RGB: [${mixedR}, ${mixedG}, ${mixedB}]`;
           mixerBinaryOutput.textContent = `Binary: [${decimalToBinary(mixedR)}, ${decimalToBinary(mixedG)}, ${decimalToBinary(mixedB)}]`;

           if (!mixerRgbOutput.querySelector('.copy-feedback')) mixerRgbOutput.appendChild(mixerRgbCopyFeedback);
           if (!mixerPythonOutput.querySelector('.copy-feedback')) mixerPythonOutput.appendChild(mixerPythonCopyFeedback);
           if (!mixerBinaryOutput.querySelector('.copy-feedback')) mixerBinaryOutput.appendChild(mixerBinaryCopyFeedback);
       }

       // Handles tab switching with animation
       function switchTab(targetTabId) {
           const currentActiveTabContent = document.querySelector('.tab-content.active');
           const nextActiveTabContent = document.getElementById(targetTabId);

           if (!nextActiveTabContent || currentActiveTabContent === nextActiveTabContent) {
               return;
           }

           const currentActiveTabButton = document.querySelector('.tab-button.active');
           const nextActiveTabButton = document.querySelector(`.tab-button[data-tab="${targetTabId}"]`);

           if (currentActiveTabButton) currentActiveTabButton.classList.remove('active');
           if (nextActiveTabButton) nextActiveTabButton.classList.add('active');

           const currentTabIndex = Array.from(tabButtons).indexOf(currentActiveTabButton);
           const nextTabIndex = Array.from(tabButtons).indexOf(nextActiveTabButton);
           const slideOutDirection = (nextTabIndex > currentTabIndex) ? '-100%' : '100%';
           const slideInStart = (nextTabIndex > currentTabIndex) ? '100%' : '-100%';

           if (currentActiveTabContent) {
               currentActiveTabContent.style.transform = `translateX(${slideOutDirection})`;
               currentActiveTabContent.style.opacity = '0';
               currentActiveTabContent.style.pointerEvents = 'none';

               currentActiveTabContent.addEventListener('transitionend', function handler() {
                   currentActiveTabContent.classList.remove('active');
                   currentActiveTabContent.style.transform = '';
                   currentActiveTabContent.style.opacity = '';
                   currentActiveTabContent.style.visibility = 'hidden';
                   currentActiveTabContent.removeEventListener('transitionend', handler);
               }, { once: true });
           }

           nextActiveTabContent.style.transform = `translateX(${slideInStart})`;
           nextActiveTabContent.style.opacity = '0';
           nextActiveTabContent.style.visibility = 'visible';
           nextActiveTabContent.style.pointerEvents = 'auto';

           setTimeout(() => {
               nextActiveTabContent.classList.add('active');
               nextActiveTabContent.style.transform = 'translateX(0)';
               nextActiveTabContent.style.opacity = '1';
           }, 10);

           if (targetTabId === 'rgb') {
               updateRgbMixer();
           } else if (targetTabId === 'mixing') {
               updateColorSimulation();
           }
       }

       // --- Event Listeners ---
       document.addEventListener('DOMContentLoaded', () => {
           setRandomGradient();

           tabButtons.forEach(button => {
               button.addEventListener('click', () => switchTab(button.dataset.tab));
           });

           redSlider.addEventListener('input', () => updateRgbMixer('sliders'));
           greenSlider.addEventListener('input', () => updateRgbMixer('sliders'));
           blueSlider.addEventListener('input', () => updateRgbMixer('sliders'));
           colorPickerInput.addEventListener('input', () => updateRgbMixer('picker'));
           colorDisplayBox.addEventListener('click', () => colorPickerInput.click());

           hexOutput.addEventListener('click', () => {
               const textToCopy = hexOutput.textContent.replace('HEX: ', '');
               navigator.clipboard.writeText(textToCopy).then(() => showCopyFeedback(hexCopyFeedback));
           });
           rgbOutput.addEventListener('click', () => {
               const textToCopy = rgbOutput.textContent.replace('RGB: ', '');
               navigator.clipboard.writeText(textToCopy).then(() => showCopyFeedback(rgbCopyFeedback));
           });
           pythonOutput.addEventListener('click', () => {
               const textToCopy = pythonOutput.textContent.replace('Python RGB: ', '');
               navigator.clipboard.writeText(textToCopy).then(() => showCopyFeedback(pythonCopyFeedback));
           });
           binaryOutput.addEventListener('click', () => {
               const textToCopy = binaryOutput.textContent.replace('Binary: ', '');
               navigator.clipboard.writeText(textToCopy).then(() => showCopyFeedback(binaryCopyFeedback));
           });

           objectColorSelect.addEventListener('change', () => {
               if (objectColorSelect.value === 'custom') {
                   objectColorPicker.click();
               }
               updateColorSimulation();
           });
           lightColorSelect.addEventListener('change', () => {
               if (lightColorSelect.value === 'custom') {
                   lightColorPicker.click();
               }
               updateColorSimulation();
           });

           objectColorPicker.addEventListener('input', () => {
               objectColorSelect.value = 'custom';
               updateColorSimulation();
           });
           lightColorPicker.addEventListener('input', () => {
               lightColorSelect.value = 'custom';
               updateColorSimulation();
           });

           objectPreviewBox.addEventListener('click', () => {
               objectColorSelect.value = 'custom';
               objectColorPicker.click();
           });
           lightPreviewBox.addEventListener('click', () => {
               lightColorSelect.value = 'custom';
               lightColorPicker.click();
           });

           mixerRgbOutput.addEventListener('click', () => {
               const textToCopy = mixerRgbOutput.textContent.replace('RGB: ', '');
               navigator.clipboard.writeText(textToCopy).then(() => showCopyFeedback(mixerRgbCopyFeedback));
           });
           mixerPythonOutput.addEventListener('click', () => {
               const textToCopy = mixerPythonOutput.textContent.replace('Python RGB: ', '');
               navigator.clipboard.writeText(textToCopy).then(() => showCopyFeedback(mixerPythonCopyFeedback));
           });
           mixerBinaryOutput.addEventListener('click', () => {
               const textToCopy = mixerBinaryOutput.textContent.replace('Binary: ', '');
               navigator.clipboard.writeText(textToCopy).then(() => showCopyFeedback(mixerBinaryCopyFeedback));
           });

           tabContents.forEach(content => {
               if (content.id !== 'rgb') {
                   content.style.opacity = '0';
                   content.style.visibility = 'hidden';
                   content.style.position = 'absolute';
               } else {
                   content.style.opacity = '1';
                   content.style.transform = 'translateX(0)';
                   content.style.visibility = 'visible';
                   content.style.position = 'static';
               }
           });
           updateRgbMixer();
       });
   </script>
</body>
</html>
